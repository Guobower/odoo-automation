---
  - name: Run Odoo
    hosts: odoo
    remote_user: root
    vars_prompt:
      - name: "pg_user"
        prompt: "Digite o nome do usuario postgres"
        default: odoo
        private: no
      - name: "pg_password"
        prompt: "Digite a senha do usuario postgres"
      - name: "odoo_port"
        prompt: "Digite a porta no qual o Odoo vai rodar"
        default: 8069
        private: no

      - name: Inicia o docker odoo
        become: yes
        become_user: odoo
        docker_container:
          name: trustcode-odoo
          image: quay.io/danimaribeiro/docker-odoo
          network_mode: host
          restart: yes
          state: started
          env:
            PG_USER: "{{ pg_user }}"
            PG_PASSWORD: "{{ pg_password }}"
            PORT: "{{ odoo_port }}"
